<!-- WEAPONS -->
<div class="dl-text-header-upper dl-underline-red dl-item-row-header">
  <div class="col-7">{{localize "DL.WeaponTitle"}}</div>
  <div class="col-2">{{localize "DL.WeaponDamage"}}</div>
  <div class="col-1">{{localize "DL.WeaponBoonsBanesShort"}}</div>
  <div class="col-2">
    <a class="item-control item-create" title="{{localize 'DL.WeaponAdd'}}" data-type="weapon">
      <i class="fas fa-plus"></i>
    </a>
  </div>
</div>


{{#each actor.weapons as |weapon id|}}
  <div class="dl-item-row {{#if system.wear}}{{else}}wearoff{{/if}} dropitem" data-item-id="{{weapon._id}}">
    <div class="row">
      <div class="col-7">
        <img class="dl-clickable item-edit" src="{{weapon.img}}" title="{{weapon.name}}" width="32" height="32"/>
        <label class="dl-rollable attack-roll">{{weapon.name}}</label>
        <div class="dl-clickable dlToggleInfoBtn">
          <i class="fas fa-angle-right"></i> {{localize "DL.ItemShowInfo"}}
        </div>
      </div>
      <div class="col-2 item-damage">
        {{#if system.consume.reloadRequired}}
          <img class="dl-clickable item-reload" src="systems/demonlord/assets/ui/other-svg/ammo2.svg" width="15px" height="15px"/>
        {{/if}}
        {{defaultValue system.action.damage "―"}}{{#if system.action.damagetypes}}∗{{/if}}
      </div>
      <div class="col-1">
        {{defaultValue (plusify system.action.boonsbanes) 0}}
      </div>
      <div class="col-2">
        <a class="dl-clickable item-delete" title="{{localize 'DL.WeaponDelete'}}"><i class="fas fa-times"></i></a>
        <a class="dl-clickable {{#if system.wear}}item-wear{{else}}item-wearoff{{/if}}" title="{{localize 'DL.WeaponWear'}}">
          <i class="{{#if system.wear}}fas fa-shield{{else}}fa-regular fa-shield{{/if}}"></i>
        </a>
      </div>
    </div>
    <div class="dlInfo dl-item-info" style="display: none">
      <!-- TODO: Action roll info -->
      <div class="row dl-item-info-header">
        <div class="col-12">
          <b>{{weapon.name}}</b>
        </div>
      </div>
      <hr>
      {{#if system.action.damage}}
        <div>
          <b>{{localize "DL.WeaponDamage"}}</b> {{system.action.damage}}
          {{#if system.action.damagetype}}({{system.action.damagetype}}){{/if}}
          {{#each system.action.damagetypes as |damagetype id|}}
            | {{damagetype.damage}}{{#if damagetype.damagetype}} ({{damagetype.damagetype}}){{/if}}
          {{/each}}
        </div>
      {{/if}}
      {{#if system.properties}}
        <div>
          <b>{{localize "DL.WeaponProperties"}}</b> {{system.properties}}
        </div>
      {{/if}}
      {{#if system.requirement.minvalue}}
        <div>
          <b>{{localize "DL.ArmorStrengthRequiremet"}}</b> {{system.requirement.minvalue}}
        </div>
      {{/if}}
      {{#if system.hands}}
        <div>
          <b>{{localize "DL.WeaponHands"}}</b> {{system.hands}}
        </div>
      {{/if}}
      {{#if system.description}}
        <hr>
        <div>
          {{{system.enrichedDescription}}}
        </div>
      {{/if}}
    </div>
  </div>
{{/each}}

<!-- ARMOR -->
<div class="dl-text-header-upper dl-underline-red dl-item-row-header" style="margin-top: 8px">
  <div class="col-10">{{localize "DL.ArmorTitle"}}</div>
  <div class="col-2">
    <a class="item-create" title="{{localize 'DL.ArmorAdd'}}" data-type="armor">
      <i class="fas fa-plus"></i>
    </a>
  </div>
</div>

{{#each actor.armor as |armor id|}}
  <div class="dl-item-row {{#if system.wear}}{{else}}wearoff{{/if}} dropitem" data-item-id="{{armor._id}}">
    <div class="row">
      <div class="col-10 dl-clickable-nored item-edit">
        <img class="dl-clickable item-edit" src="{{armor.img}}" title="{{armor.name}}" width="32" height="32"/>
        <div style="font-weight: normal">{{armor.name}}</div>
        <div>
          {{#if system.defense}}
            {{localize "DL.ArmorDefense"}} {{plusify system.defense}}
          {{/if}}
          {{#if system.agility}}
            {{localize "DL.ArmorAgility"}} {{plusify system.agility}}
          {{/if}}
          {{#if system.fixed}}
            {{localize "DL.ArmorFixed"}} {{system.fixed}}
          {{/if}}
        </div>
      </div>
      <div class="col-2">
        <a class="dl-clickable item-delete" title="{{localize 'DL.ArmorDelete'}}"><i class="fas fa-times"></i></a>
        <a class="dl-clickable {{#if system.wear}}item-wear{{else}}item-wearoff{{/if}}"
           title="{{localize 'DL.ArmorWear'}}">
          <i class="{{#if system.wear}}fas fa-shield{{else}}fa-regular fa-shield{{/if}}"></i>
        </a>
      </div>
    </div>
  </div>
{{/each}}

<!-- AMMUNITION -->
<div class="dl-text-header-upper dl-underline-red dl-item-row-header" style="margin-top: 8px">
  <div class="col-8">{{localize "DL.AmmoTitle"}}</div>
  <div class="col-2">{{localize "DL.AmmoAmount"}}</div>
  <div class="col-2">
    <a class="item-create" title="{{localize 'DL.AmmoAdd'}}" data-type="ammo">
      <i class="fas fa-plus"></i>
    </a>
  </div>
</div>
{{#each actor.ammo as |ammo id|}}
  <div class="dl-item-row dropitem" data-item-id="{{ammo._id}}">
    <div class="row">
      <div class="col-8 dl-clickable-nored item-edit">
        <img class="dl-clickable item-edit" src="{{ammo.img}}" title="{{ammo.name}}" width="32" height="32"/>
        <div style="font-weight: normal">{{ammo.name}}</div>
      </div>
      <div class="col-2 ammo-amount">
        {{system.quantity}} <i class="fas fa-arrows-alt-v"></i>
      </div>
      <div class="col-2">
        <a class="dl-clickable item-delete" title="{{localize 'DL.AmmoDelete'}}"><i class="fas fa-times"></i></a>
      </div>
    </div>
  </div>
{{/each}}

{{#*inline "dlAffliction"}}
  <div class="dl-new-project-2 selectable {{#if value}}selected{{/if}}"
       style="width: auto; margin: 2px"
       {{#if tooltip}}data-tippy-affliction="{{localize tooltip}}"{{/if}}>
    <input type="checkbox" id="data.afflictions.{{name}}" data-name="{{name}}" {{checked value}}/>
    <i class="dl-icon-{{name}}"></i>
    <span class="sep"></span>
    <span style="margin-left: 4px">{{localize label}}</span>
  </div>
{{/inline}}

<div class="dl-text-header-upper dl-underline-red dl-item-row-header">
  <div class="col-12">{{localize "DL.Actions"}}</div>
</div>

<div class="grid-5">
  {{> dlAffliction name="concentrate" value=flags.demonlord.concentrate label="DL.concentrate" tooltip="DL.AfflictionsConcentrate"}}
  {{> dlAffliction name="defend"      value=flags.demonlord.defend      label="DL.defend"      tooltip="DL.AfflictionsDefend"}}
  {{> dlAffliction name="help"        value=flags.demonlord.help        label="DL.help"        tooltip="DL.AfflictionsHelp"}}
  {{> dlAffliction name="prepare"     value=flags.demonlord.prepare     label="DL.prepare"     tooltip="DL.AfflictionsPrepare"}}
  {{> dlAffliction name="reload"      value=flags.demonlord.reload      label="DL.reload"      tooltip="DL.AfflictionsReload"}}
  {{> dlAffliction name="retreat"     value=flags.demonlord.retreat     label="DL.retreat"     tooltip="DL.AfflictionsRetreat"}}
  {{> dlAffliction name="rush"        value=flags.demonlord.rush        label="DL.rush"        tooltip="DL.AfflictionsRush"}}
  {{> dlAffliction name="stabilize"   value=flags.demonlord.stabilize   label="DL.stabilize"   tooltip="DL.AfflictionsStabilize"}}
</div>
